(this["webpackJsonpcase-study"]=this["webpackJsonpcase-study"]||[]).push([[0],{61:function(e,t,a){e.exports=a(73)},66:function(e,t,a){},67:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(7),r=a.n(c),l=(a(66),a(41)),s=a(34),o=a(35),u=a(44),d=a(36),h=a(23),g=a(45),m=(a(67),a(40));var b=a(113),f=a(117),p=a(128),v=a(127),C=a(131),E=Object(b.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),y=function(e){var t=E(),a=e.values.map((function(e){return i.a.createElement(p.a,{key:e,value:e},e)}));return i.a.createElement(f.a,{variant:"outlined",className:t.formControl},i.a.createElement(C.a,{id:"demo-simple-select-outlined-label"},e.label),i.a.createElement(v.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:e.value,onChange:e.handleChange,label:e.label,disabled:e.disabled},a))},S=function(e){return i.a.createElement("div",null,i.a.createElement(y,{label:"Continent",value:e.selectedContinent,values:["ALL"].concat(Object(l.a)(e.continents)),handleChange:e.changeContinentSetting,disabled:e.isDisabled}),i.a.createElement(y,{label:"Metric",value:e.selectedMetric,values:["ALL","areaInSqKm","population"],handleChange:e.changeMetricSetting,disabled:e.isDisabled}),i.a.createElement(y,{label:"Max results",value:e.selectedChartMaxValue,values:[5,10,15,20],handleChange:e.changeChartMaxSetting,disabled:e.isDisabled}))},M=a(125),D=a(126),O=a(38),j=a.n(O),k=a(47),x=a.n(k),N=a(54),L=a.n(N),A=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={options:{}},a}return Object(g.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.drawChart()}},{key:"componentDidUpdate",value:function(e){j.a.isEqual(e,this.props)||this.drawChart()}},{key:"createDataArray",value:function(e,t,a){e.sort((function(e,a){return Number(a[t])-Number(e[t])}));for(var n=[],i=0;i<a;i++)e[i]&&n.push({name:e[i].countryName,y:Number(e[i][t])});if(a<e.length){for(var c=0,r=a;r<e.length;r++)c+=Number(e[r][t]);n.push({name:"Other",y:c})}return n}},{key:"drawChart",value:function(){var e=this.props,t=e.data,a=e.selectedMetric,n=e.selectedChartMaxValue,i={chart:{type:"pie"},title:{text:a},series:[{data:this.createDataArray(t,a,n)}]};this.setState({options:i})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(L.a,{highcharts:x.a,options:this.state.options}))}}]),t}(i.a.Component),V=a(55),w=a(46),T=a(120),U=a(124),I=a(123),P=a(119),R=a(121),G=a(122),B=a(129),F=a(118);function Q(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function _(e){var t=e.selectedChartMaxValue,a=e.data,n=e.metric,c=i.a.useState("asc"),r=Object(w.a)(c,2),l=r[0],s=r[1],o=i.a.useState(),u=Object(w.a)(o,2),d=u[0],h=u[1],g=i.a.useState([]),m=Object(w.a)(g,2),b=m[0],f=m[1];a.sort((function(e,t){return Number(t[n])-Number(e[n])}));var p=[],v=n;"ALL"===n&&(v="population");for(var C=0;C<t;C++)a[C]&&p.push(Object(V.a)({countryCode:a[C].countryCode,continent:a[C].continent,countryName:a[C].countryName},n,Number(a[C][v])));var E=0;p.forEach((function(e){E+=e[n]}));var y=[{id:"continent",numeric:!0,disablePadding:!1,label:"CONTINENT"},{id:"countryName",numeric:!0,disablePadding:!1,label:"COUNTRYNAME"},{id:n,numeric:!0,disablePadding:!1,label:n.toUpperCase()}],S=function(e){return function(t){!function(e,t){s(d===t&&"asc"===l?"desc":"asc"),h(t)}(0,e)}};return i.a.createElement("div",null,i.a.createElement(F.a,null,i.a.createElement(P.a,null,i.a.createElement(T.a,{"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},i.a.createElement(R.a,null,i.a.createElement(G.a,null,y.map((function(e){return i.a.createElement(I.a,{key:e.id,padding:e.disablePadding?"none":"default",sortDirection:d===e.id&&l,style:{fontWeight:"bold"}},i.a.createElement(B.a,{active:d===e.id,direction:d===e.id?l:"asc",onClick:S(e.id)},e.label))})))),i.a.createElement(U.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(p,function(e,t){return"desc"===e?function(e,a){return Q(e,a,t)}:function(e,a){return-Q(e,a,t)}}(l,d)).map((function(e){var t,a=(t=e.name,-1!==b.indexOf(t));return i.a.createElement(G.a,{hover:!0,onClick:function(t){return function(e,t){var a=b.indexOf(t),n=[];-1===a?n=n.concat(b,t):0===a?n=n.concat(b.slice(1)):a===b.length-1?n=n.concat(b.slice(0,-1)):a>0&&(n=n.concat(b.slice(0,a),b.slice(a+1))),f(n)}(0,e.countryName)},"aria-checked":a,tabIndex:-1,key:e.countryCode,selected:a},i.a.createElement(I.a,null,e.continent),i.a.createElement(I.a,null,e.countryName),i.a.createElement(I.a,{align:"right"},e[n]))})),i.a.createElement(G.a,null,i.a.createElement(I.a,null),i.a.createElement(I.a,{style:{fontWeight:"bold"}},"TOTAL"),i.a.createElement(I.a,{align:"right"},E)))))))}var W=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={selectedContinent:"ALL",selectedMetric:"ALL",selectedChartMaxValue:5,continents:[],isFilterDisabled:!0,geoData:[]},a.GoButtonClicked=a.GoButtonClicked.bind(Object(h.a)(a)),a.changeContinentSetting=a.changeContinentSetting.bind(Object(h.a)(a)),a.changeChartMaxSetting=a.changeChartMaxSetting.bind(Object(h.a)(a)),a.changeMetricSetting=a.changeMetricSetting.bind(Object(h.a)(a)),a}return Object(g.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;j.a.isEqual(e.geoData,this.props.geoData)||this.setState({geoData:this.props.geoData},(function(){t.getContinents(t.state.geoData)}))}},{key:"changeContinentSetting",value:function(e){var t=e.target.value,a=this.changeContinentData(t);this.setState({selectedContinent:t,geoData:a})}},{key:"changeContinentData",value:function(e){var t=this.props.geoData,a=[];return"ALL"===e?a=t:t.forEach((function(t){t.continent===e&&a.push(t)})),a}},{key:"changeMetricSetting",value:function(e){var t=e.target.value;this.setState({selectedMetric:t})}},{key:"changeChartMaxSetting",value:function(e){var t=e.target.value;this.setState({selectedChartMaxValue:t})}},{key:"getContinents",value:function(e){var t=e.map((function(e){return e.continent})),a=Object(l.a)(new Set(t.sort()));this.setState({continents:a})}},{key:"GoButtonClicked",value:function(){this.props.getFetchData()}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("h1",null,"Hydrane ReactJS Frontend Dev CS"),i.a.createElement(M.a,{variant:"contained",color:"secondary",onClick:this.GoButtonClicked},"Go")),i.a.createElement(S,{changeContinentSetting:this.changeContinentSetting,changeChartMaxSetting:this.changeChartMaxSetting,changeMetricSetting:this.changeMetricSetting,continents:this.state.continents,selectedContinent:this.state.selectedContinent,selectedChartMaxValue:this.state.selectedChartMaxValue,selectedMetric:this.state.selectedMetric,isDisabled:0===this.state.continents.length}),this.props.isPending&&i.a.createElement(D.a,null),0!==this.state.continents.length&&i.a.createElement("div",null,"ALL"===this.state.selectedMetric?i.a.createElement("div",null,i.a.createElement(A,{selectedMetric:"areaInSqKm",data:this.state.geoData,selectedChartMaxValue:this.state.selectedChartMaxValue}),i.a.createElement(A,{selectedMetric:"population",data:this.state.geoData,selectedChartMaxValue:this.state.selectedChartMaxValue})):i.a.createElement(A,{selectedMetric:this.state.selectedMetric,data:this.state.geoData,selectedChartMaxValue:this.state.selectedChartMaxValue}),i.a.createElement(_,{data:this.state.geoData,selectedChartMaxValue:this.state.selectedChartMaxValue,metric:this.state.selectedMetric})))}}]),t}(i.a.Component),q=Object(m.b)((function(e){return{geoData:e.geoData,isPending:e.isPending}}),(function(e){return{getFetchData:function(){return e((function(e){e({type:"REQUEST_pENDING"}),fetch("http://api.geonames.org/countryInfoJSON?formatted=true&username=hydrane").then((function(e){return e.json()})).then((function(t){return e({type:"REQUEST_SUCCESS",data:t})})).catch((function(t){return e({type:"REQUEST_FAILED",payload:t})}))}))}}}))(W);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=a(32),K={names:[],geoData:[],isPending:!1};var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_pENDING":return Object.assign({},e,{isPending:!0});case"REQUEST_SUCCESS":return Object.assign({},e,{geoData:t.data.geonames,isPending:!1});case"REQUEST_FAILED":return Object.assign({},e,{isPending:!1});default:return e}},H=a(56);r.a.render(i.a.createElement(m.a,{store:Object(J.c)(z,Object(J.a)(H.a))},i.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[61,1,2]]]);
//# sourceMappingURL=main.99d1d355.chunk.js.map